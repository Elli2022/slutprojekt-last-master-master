{"mappings":"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","sources":["src/modules/domElements.ts","src/modules/api.ts","src/modules/app.ts"],"sourcesContent":["export const elements = {\n    imageSelection: document.getElementById(\"image-selection\") as HTMLSelectElement | null,\n    createAccountButton: document.getElementById(\"create-account-button\") as HTMLButtonElement | null,\n    submitButton: document.getElementById(\"submit-button\") as HTMLButtonElement | null,\n    usernameInput: document.getElementById(\"username\") as HTMLInputElement | null,\n    passwordInput: document.getElementById(\"password\") as HTMLInputElement | null,\n    form: document.getElementById(\"form\") as HTMLFormElement,\n    errorMessage: document.createElement(\"p\"),\n    userDeletedSuccessfully: document.createElement('h1'),\n    failedToDeleteUser: document.createElement('h1'),\n    messageInput: document.createElement('input'),\n    listItem: document.createElement(\"li\"),\n    body: document.getElementById('body') as HTMLBodyElement,\n    accountCreated: document.createElement(\"h1\"),\n    logInpage: document.getElementById('logInpage') as HTMLDivElement,\n    container: document.getElementById('container') as HTMLDivElement,\n    currentUser: document.getElementById(\"current-user\") as HTMLHeadingElement | null,\n    statusUpdates: document.getElementById(\"status-updates\") as HTMLUListElement | null,\n    newStatusUpdate: document.getElementById(\"new-status-update\") as HTMLInputElement | null,\n    addStatusUpdate: document.getElementById(\"add-status-update\") as HTMLButtonElement | null,\n    loggedInUsersList: document.querySelector('.js-logged-in-users-list') as HTMLElement,\n    otherUserPageHeader: document.querySelector('.js-other-user-page-header') as HTMLHeadingElement | null,\n    deleteAccount: document.getElementById(\"delete-account\") as HTMLButtonElement | null,\n    deleteAccountButton: document.getElementById(\"delete-account-button\") as HTMLButtonElement | null,\n    statusInput: document.getElementById(\"status-input\") as HTMLInputElement | null,\n    statusUpdateButton: document.getElementById(\"status-update-button\") as HTMLButtonElement | null,\n    otherUserPage: document.getElementById(\"other-user-page\") as HTMLElement,\n    loggedInUsersPage: document.getElementById(\"logged-in-users-page\") as HTMLDivElement | null,\n    statusUpdatesList: document.getElementById(\"status-updates-list\") as HTMLUListElement | null,\n    submitStatus: document.getElementById(\"submit-status\") as HTMLButtonElement,\n    allUsersList: document.getElementById(\"allUsersList\") as HTMLUListElement,\n    userStatus: document.getElementById('userStatus') as HTMLElement,  \n    \n    \n};\n    \n\n\n\n\n\n\nif (elements.logInpage) {\n    elements.logInpage.style.display = \"block\";\n}\n\nelements.container.style.display = \"none\";\nelements.body.appendChild(elements.container);\n\n\nconst errorMessage = document.createElement(\"div\");\nerrorMessage.className = \"error-message\";\n","import { UserInfo, FirebaseResponse } from './interfaces';\n\nconst baseUrl = \"https://social-media-68d76-default-rtdb.europe-west1.firebasedatabase.app/\";\n\nexport async function getUsers(): Promise<UserInfo[]> {\n    try {\n      const response = await fetch(`${baseUrl}users.json`);\n      if (!response.ok) {\n        throw new Error(`Error: ${response.status} ${response.statusText}`);\n      }\n      const users: FirebaseResponse | null = await response.json();\n      if (!users) {\n        return [];\n      }\n      const usersArray: UserInfo[] = Object.values(users);\n      return usersArray;\n    } catch (err) {\n      throw new Error(\"Failed to fetch users\");\n    }\n  }\n  \n\n  export async function saveUser(user: UserInfo): Promise<void> {\n    const arrData = await getUsers();\n    const url = `${baseUrl}users/${user.userName}.json`;\n    const init = {\n      method: \"PUT\",\n      body: JSON.stringify(user),\n      headers: {\n        \"Content-type\": \"application/json; charset=UTF-8\",\n      },\n    };\n  \n    try {\n      const response = await fetch(url, init);\n  \n      if (!response.ok) {\n        throw new Error(`Error: ${response.status} ${response.statusText}`);\n      }\n  \n    } catch (err) {\n      console.log(err);\n      throw new Error(\"Failed to save user information.\");\n    }\n  }\n  \n\n\nexport async function deleteUser(username: string): Promise<void> {\n    const url = `${baseUrl}users/${username}.json`;\n    const init = {\n        method: \"DELETE\",\n    };\n\n    try {\n        const response = await fetch(url, init);\n\n        if (!response.ok) {\n            throw new Error(`Error: ${response.status} ${response.statusText}`);\n        }\n    } catch (err) {\n        console.log(err);\n        throw new Error(\"Failed to delete user.\");\n    }\n}\n\nexport async function addStatusUpdate(newStatus: string): Promise<void> {\n  const currentUser = await getLoggedInUser(); // Use getLoggedInUser() instead of getCurrentUser()\n  if (!currentUser) {\n    throw new Error(\"User not found.\");\n  }\n\n  currentUser.status = newStatus;\n\n  const url = `${baseUrl}users/${currentUser.userName}.json`;\n  const init = {\n    method: \"PUT\",\n    body: JSON.stringify(currentUser),\n    headers: {\n      \"Content-type\": \"application/json; charset=UTF-8\",\n    },\n  };\n\n  try {\n    const response = await fetch(url, init);\n\n    if (!response.ok) {\n      throw new Error(`Error: ${response.status} ${response.statusText}`);\n    }\n  } catch (err) {\n    console.log(err);\n    throw new Error(\"Failed to add status update.\");\n  }\n}\n\n\nexport async function getCurrentUser(): Promise<UserInfo | null> {\n  const loggedInUserName = localStorage.getItem(\"loggedInUser\");\n  if (loggedInUserName) {\n    return await getUserByUsername(loggedInUserName);\n  }\n  return null;\n}\n\n// Export getUserByUsername function\nexport async function getUserByUsername(username: string): Promise<UserInfo | null> {\n  const users = await getUsers();\n  const currentUser = users.find((user) => user.userName === username);\n  return currentUser || null;\n}\n\n\nexport async function getLoggedInUser(): Promise<UserInfo | null> {\n  const loggedInUserName = localStorage.getItem(\"loggedInUser\");\n  if (loggedInUserName) {\n    return await getUserByUsername(loggedInUserName);\n  }\n  return null;\n}\n\n  ","import { elements } from './domElements';\nimport { UserInfo, StatusUpdate } from './interfaces';\nimport { getUsers, saveUser, getCurrentUser, deleteUser, getUserByUsername } from './api';\nimport { getLoggedInUser as loggedInUser } from './api';\n\nasync function createUser() {\n  const userName = elements.usernameInput!.value.trim();\n  const password = elements.passwordInput!.value.trim();\n  const selectedImage = elements.imageSelection!.value.trim();\n\n  if (userName && password && selectedImage) {\n    try {\n      const existingUser = await getUserByUsername(userName); // Check if user already exists\n      if (existingUser) {\n        elements.errorMessage.innerHTML = \"Username already exists. Please choose a different username.\";\n        elements.body.appendChild(elements.errorMessage);\n        setTimeout(() => {\n          elements.errorMessage.remove();\n        }, 3000);\n        return;\n      }\n\n      const newUser: UserInfo = {\n        userName: userName,\n        password: password,\n        status: \"\",\n        imageurl: selectedImage,\n        newUser: true, // Setting newUser to true when creating a new account\n        statusUpdates: [],\n      };\n\n      await saveUser(newUser);\n      elements.accountCreated.innerHTML = \"Account Created! Now you can login!\";\n      elements.body.appendChild(elements.accountCreated);\n      setTimeout(() => {\n        elements.accountCreated.remove();\n      }, 3000);\n    } catch (err) {\n      console.log(err);\n      elements.errorMessage.innerHTML = \"Failed to create account. Try again.\";\n      elements.body.appendChild(elements.errorMessage);\n      setTimeout(() => {\n        elements.errorMessage.remove();\n      }, 3000);\n    }\n  } else {\n    elements.errorMessage.innerHTML = \"Please fill in all fields.\";\n    elements.body.appendChild(elements.errorMessage);\n    setTimeout(() => {\n      elements.errorMessage.remove();\n    }, 3000);\n  }\n}\n\n\nasync function loginUser() {\n  const userName = elements.usernameInput!.value.trim();\n  const password = elements.passwordInput!.value.trim();\n\n  if (userName && password) {\n    try {\n      const users = await getUsers();\n      const foundUser = users.find((user) => user.userName === userName && user.password === password);\n\n      if (!foundUser) {\n        elements.errorMessage.innerHTML = \"Username does not exist. Please create an account before logging in.\";\n        elements.body.appendChild(elements.errorMessage);\n        setTimeout(() => {\n          elements.errorMessage.remove();\n        }, 3000);\n        return;\n      }\n\n      foundUser.newUser = false; // Set newUser to false when user logs in\n      foundUser.status = \"logged-in\"; // Set the user's status to \"logged-in\"\n      await saveUser(foundUser);\n      localStorage.setItem(\"loggedInUser\", foundUser.userName);\n      elements.allUsersList.style.display = \"block\";\n      elements.logInpage.style.display = \"none\";\n      elements.container.style.display = \"block\";\n      if (elements.currentUser) {\n        elements.currentUser.textContent = `${foundUser.userName}`;\n      } else {\n        console.error('elements.currentUser is null');\n      }\n\n      displayLoggedInUsers();\n      displayUserStatus();\n\n    \n    } catch (err) {\n      console.log(err);\n      elements.errorMessage.innerHTML = \"Failed to log in. Try again.\";\n      elements.body.appendChild(elements.errorMessage);\n      setTimeout(() => {\n        elements.errorMessage.remove();\n      }, 3000);\n    }\n  } else {\n    elements.errorMessage.innerHTML = \"Please enter a username and password.\";\n    elements.body.appendChild(elements.errorMessage);\n    setTimeout(() => {\n      elements.errorMessage.remove();\n    }, 3000);\n  }\n\n  document.getElementById(\"logoutButton\")!.style.display = \"block\";\n  document.getElementById(\"delete-account-button\")!.style.display = \"block\";\n}\n\n// To move 'container' before 'allUsersList'\nelements.allUsersList!.parentNode!.insertBefore(elements.container, elements.allUsersList);\n\nasync function displayUserStatus() {\n  const currentUser = await getCurrentUser();\n  if (currentUser) {\n    elements.userStatus!.textContent = `${currentUser.userName}'s status: ${currentUser.status}`;\n  }\n}\n\nasync function addStatusUpdate() {\n  const newStatus = elements.statusInput!.value.trim();\n\n  if (newStatus) {\n    try {\n      const currentUser = await getCurrentUser();\n      if (currentUser) {\n        if (!currentUser.statusUpdates) {\n          currentUser.statusUpdates = [];\n        }\n        const timestamp = new Date().toISOString();\n        currentUser.statusUpdates.push({ status: newStatus, timestamp: timestamp });\n        await saveUser(currentUser);\n        elements.statusInput!.value = \"\";\n        // displayStatusUpdates();\n        displayAllUsers();\n      } else {\n        elements.errorMessage.innerHTML = \"Failed to find the current user.\";\n        elements.body.appendChild(elements.errorMessage);\n        setTimeout(() => {\n          elements.errorMessage.remove();\n        }, 3000);\n      }\n    } catch (err) {\n      console.log(err);\n      elements.errorMessage.innerHTML = \"Failed to update status. Try again.\";\n      elements.body.appendChild(elements.errorMessage);\n      setTimeout(() => {\n        elements.errorMessage.remove();\n      }, 3000);\n    }\n  } else {\n    elements.errorMessage.innerHTML = \"Please enter a status update.\";\n    elements.body.appendChild(elements.errorMessage);\n    setTimeout(() => {\n      elements.errorMessage.remove();\n    }, 3000);\n  }\n}\n\nasync function displayLoggedInUsers() {\n  const users = await getUsers();\n  const currentUser = await getCurrentUser();\n\n  users.forEach(user => {\n    const li = document.createElement(\"li\");\n    li.textContent = `${user.userName}:`;\n\n    // Check that the element exists before appending the child element\n    if (elements.loggedInUsersList) {\n      elements.loggedInUsersList.appendChild(li);\n    }\n  });\n}\n\nasync function displayAllUsers() {\n  try {\n    const allUsers = await getUsers();\n    const userList = document.createElement(\"ul\");\n    allUsers.forEach((user: UserInfo) => {\n      const listItem = document.createElement(\"li\");\n      listItem.classList.add(\"user-item\");\n      const latestStatus: StatusUpdate | \"\" = user.statusUpdates && user.statusUpdates.length > 0\n        ? user.statusUpdates[user.statusUpdates.length - 1]\n        : \"\";\n\n      let formattedDate = '';\n      if (typeof latestStatus === 'object' && latestStatus !== null) {\n        const date = latestStatus.timestamp ? new Date(latestStatus.timestamp) : null;\n        formattedDate = date ? `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')} ${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}:${String(date.getSeconds()).padStart(2, '0')}` : '';\n      }\n      \n      const userImage = document.createElement('img');\n      userImage.src = user.imageurl;\n      userImage.width = 50; // Adjust the width as needed\n      userImage.height = 50; // Adjust the height as needed\n      userImage.style.marginRight = '5px';\n\n      const userNameText = document.createTextNode(`${user.userName} - Last status: ${(typeof latestStatus === 'object' && latestStatus !== null) ? latestStatus.status : 'No status update yet'} ${formattedDate ? `(${formattedDate})` : ''}`);\n\n      listItem.appendChild(userImage);\n      listItem.appendChild(userNameText);\n\n      listItem.addEventListener(\"click\", () => {\n        visitOtherUserPage(user.userName);\n      });\n      userList.appendChild(listItem);\n    });\n    if (elements.allUsersList) {\n      elements.allUsersList.innerHTML = \"\";\n      elements.allUsersList.appendChild(userList);\n    }\n  } catch (err: any) {\n    console.log(err?.message ?? err);\n  }\n};\n\n\nasync function visitOtherUserPage(username: string): Promise<void> {\n  const user = await getUserByUsername(username);\n  document.getElementById('backButton')!.style.display = \"block\";\n  elements.statusUpdates!.style.display = 'none'; // hide the status updates list\n  const listElements = document.querySelectorAll('.user-item');\n  listElements.forEach((element) => {\n    (element as HTMLElement).style.display = 'none' // hide the user list items\n  });\n  if (!user) {\n    throw new Error(\"User not found.\");\n  }\n\n  const loggedInUsersPage = document.getElementById(\"container\");\n  const otherUserPage = document.getElementById(\"otherUserPage\");\n\n  if (loggedInUsersPage && otherUserPage) {\n    loggedInUsersPage.style.display = \"none\";\n    otherUserPage.style.display = \"block\";\n    otherUserPage.querySelector(\".username\")!.textContent = user.userName;\n    otherUserPage.querySelector(\".profile-pic\")!.setAttribute(\"src\", user.imageurl);\n\n    // Display all status updates in descending order\n    const statusUpdatesContainer = otherUserPage.querySelector(\".status-updates\");\n    if (statusUpdatesContainer) {\n      statusUpdatesContainer.innerHTML = \"\"; // Clear previous status updates\n      if (user.statusUpdates) {\n        user.statusUpdates.sort((a, b) => new Date(b.timestamp).getTime() - new Date(a.timestamp).getTime()); // Sort by descending timestamp\n        user.statusUpdates.forEach((statusUpdate) => {\n          const statusElement = document.createElement(\"p\");\n          const date = new Date(statusUpdate.timestamp);\n          const formattedDate = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')} ${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}:${String(date.getSeconds()).padStart(2, '0')}`;\n          statusElement.textContent = `${formattedDate}: ${statusUpdate.status}`;\n          statusUpdatesContainer.appendChild(statusElement);\n        });\n      } else {\n        const noStatusElement = document.createElement(\"p\");\n        noStatusElement.textContent = \"No status update yet.\";\n        statusUpdatesContainer.appendChild(noStatusElement);\n      }\n    } else {\n      console.error(\"Error: statusUpdatesContainer element is missing.\");\n    }\n  } else {\n    console.error(\"Error: loggedInUsersPage or otherUserPage element is missing.\");\n  }\n}\n\n\nfunction goBackToMainView() {\n  const loggedInUsersPage = document.getElementById(\"container\");\n  const otherUserPage = document.getElementById(\"otherUserPage\");\n  document.getElementById('backButton')!.style.display = \"none\";\n\n  if (loggedInUsersPage && otherUserPage) {\n    loggedInUsersPage.style.display = \"block\";\n    otherUserPage.style.display = \"none\";\n    \n\n    // Show the userListWrapper when returning to the main view\n    const userListWrapper = document.getElementById(\"userListWrapper\");\n    if (userListWrapper) {\n      userListWrapper.style.display = \"block\";\n    }\n\n    // Hide the status updates list and user list items\n    elements.statusUpdates!.style.display = 'block';\n    const listElements = document.querySelectorAll('.user-item');\n    listElements.forEach((element) => {\n      (element as HTMLElement).style.display = 'block';\n    });\n  } else {\n    console.error(\"Error: loggedInUsersPage or otherUserPage element is missing.\");\n  }\n}\n\n\n\nasync function redirectToLogin() {\n  await logoutAndUpdateStatus();\n  window.location.href = \"/\"; // Assuming your login page is at the root URL\n}\n\ndocument.getElementById(\"logoutButton\")?.addEventListener(\"click\", redirectToLogin);\n\nasync function logoutAndUpdateStatus() {\n  const currentUser = await getCurrentUser();\n  if (currentUser) {\n    currentUser.status = \"logged-out\";\n    await saveUser(currentUser);\n  }\n  localStorage.removeItem(\"loggedInUser\");\n}\n\nasync function deleteCurrentUser() {\n  const userName = elements.usernameInput!.value.trim();\n  const password = elements.passwordInput!.value.trim();\n\n  if (userName && password) {\n    try {\n      const users = await getUsers();\n\n      const foundUser = users.find((user) => user.userName === userName && user.password === password);\n\n      if (foundUser) {\n        await deleteUser(foundUser.userName);\n        localStorage.removeItem(\"loggedInUser\");\n        elements.userDeletedSuccessfully.innerHTML = \"User deleted successfully!\";\n        elements.body.appendChild(elements.userDeletedSuccessfully);\n        setTimeout(() => {\n          elements.userDeletedSuccessfully.remove();\n        }, 3000);\n\n        // Reset the input fields and navigate back to the login page\n        elements.allUsersList.style.display = \"none\";\n        elements.usernameInput!.value = '';\n        elements.passwordInput!.value = '';\n        // elements.container.style.display = \"none\";\n        elements.logInpage.style.display = \"block\";\n        document.getElementById('otherUserPage')!.style.display = \"none\";\n        document.getElementById('container')!.style.display = \"none\";\n        document.getElementById('logoutButton')!.style.display = \"none\";\n        document.getElementById('delete-account-button')!.style.display = \"none\";\n        document.getElementById(\"backButton\")!.style.display = \"none\";\n  \n      \n\n        // Update the list of users and their status updates after deleting the user\n        await displayAllUsers();\n\n      } else {\n        elements.failedToDeleteUser.innerHTML = \"Failed to delete user. Incorrect username or password.\";\n        elements.body.appendChild(elements.failedToDeleteUser);\n        setTimeout(() => {\n          elements.failedToDeleteUser.remove();\n        }, 3000);\n      }\n    } catch (err) {\n      console.log(err);\n      elements.failedToDeleteUser.innerHTML = \"Failed to delete user. Try again.\";\n      elements.body.appendChild(elements.failedToDeleteUser);\n      setTimeout(() => {\n        elements.failedToDeleteUser.remove();\n      }, 3000);\n    }\n  } else {\n    elements.errorMessage.innerHTML = \"Please enter a username and password.\";\n    elements.body.appendChild(elements.errorMessage);\n    setTimeout(() => {\n      elements.errorMessage.remove();\n    }, 3000);\n  }\n\n  // Navigate back to the login page\n  // elements.container.style.display = \"none\";\n  // elements.logInpage.style.display = \"block\";\n}\n\n\n\nfunction setupEventListeners() {\n  console.log(\"Create Account Button: \", elements.createAccountButton);\n  console.log(\"Submit Button: \", elements.submitButton);\n  console.log(\"Delete Account Button: \", elements.deleteAccountButton);\n  console.log(\"Submit Status: \", elements.submitStatus);\n\n  elements.createAccountButton!.addEventListener(\"click\", () => {\n    createUser();\n  });\n\n  elements.submitButton!.addEventListener(\"click\", (event) => {\n    event.preventDefault();\n    loginUser();\n  });\n\n  elements.deleteAccountButton!.addEventListener(\"click\", () => {\n    deleteCurrentUser();\n  });\n\n  elements.submitStatus!.addEventListener(\"click\", (event) => {\n    event.preventDefault();\n    addStatusUpdate();\n  });\n  const backButton = document.getElementById(\"backButton\");\n  if (backButton) {\n    backButton.addEventListener(\"click\", goBackToMainView);\n  } else {\n    console.error(\"Error: backButton element is missing.\");\n  }\n}\n\nasync function init() {\n  document.addEventListener('DOMContentLoaded', async () => {\n    setupEventListeners();\n    await displayAllUsers();\n  });\n}\n\ninit();\n\n\n\n"],"names":["$180a3ec4d9117066$export$7a5d735b2ab6389d","imageSelection","document","getElementById","createAccountButton","submitButton","usernameInput","passwordInput","form","errorMessage","createElement","userDeletedSuccessfully","failedToDeleteUser","messageInput","listItem","body","accountCreated","logInpage","container","currentUser","statusUpdates","newStatusUpdate","addStatusUpdate","loggedInUsersList","querySelector","otherUserPageHeader","deleteAccount","deleteAccountButton","statusInput","statusUpdateButton","otherUserPage","loggedInUsersPage","statusUpdatesList","submitStatus","allUsersList","userStatus","style","display","appendChild","className","$fe11eb32f95cc6d1$var$baseUrl","async","$fe11eb32f95cc6d1$export$925a4945a6cd0f3e","response","fetch","ok","Error","status","statusText","users","json","Object","values","err","$fe11eb32f95cc6d1$export$ca0e1882e225378b","user","url","userName","init","method","JSON","stringify","headers","console","log","$fe11eb32f95cc6d1$export$7d0f10f273c0438a","username","$fe11eb32f95cc6d1$export$e5432d4c8eb97ea7","loggedInUserName","localStorage","getItem","$fe11eb32f95cc6d1$export$fe689bf0ea1a115a","find","$afc4fdb57cd652c4$var$loginUser","value","trim","password","foundUser","innerHTML","setTimeout","remove","newUser","setItem","textContent","error","forEach","li","$afc4fdb57cd652c4$var$displayLoggedInUsers","$afc4fdb57cd652c4$var$displayUserStatus","$afc4fdb57cd652c4$var$displayAllUsers","allUsers","userList","classList","add","latestStatus","length","formattedDate","date","timestamp","Date","getFullYear","String","getMonth","padStart","getDate","getHours","getMinutes","getSeconds","userImage","src","imageurl","width","height","marginRight","userNameText","createTextNode","addEventListener","querySelectorAll","element","setAttribute","statusUpdatesContainer","sort","a","b","getTime","statusUpdate","statusElement","noStatusElement","$afc4fdb57cd652c4$var$visitOtherUserPage","message","$afc4fdb57cd652c4$var$goBackToMainView","userListWrapper","$afc4fdb57cd652c4$var$deleteCurrentUser","removeItem","$afc4fdb57cd652c4$var$setupEventListeners","selectedImage","$afc4fdb57cd652c4$var$createUser","event","preventDefault","newStatus","toISOString","push","$afc4fdb57cd652c4$var$addStatusUpdate","backButton","parentNode","insertBefore","$afc4fdb57cd652c4$var$logoutAndUpdateStatus","window","location","href","$afc4fdb57cd652c4$var$init"],"version":3,"file":"index.8dceeb25.js.map"}